---
import { RECORDS_PER_PAGE, SITE_SUBTITLE, SITE_TITLE } from '../consts'

import { ThemeLink } from '@/components/link/theme-link'

import { BaseCol } from '@/components/layout/base-col'

import { RoundedImage } from '@/components/rounded-image'

import ContentDiv from '@/components/layout/ContentDiv.astro'
import BaseLayout from '@/layouts/BaseLayout.astro'
import { getSortedPosts } from '@/lib/astro/post'
import { getPageItems } from '@/lib/paginate'
import type { IPost } from '@/lib/post'

import { HeroPosts } from '@/components/posts/hero-posts'
import { RestPosts } from '@/components/posts/rest-posts'

const posts = getPageItems(await getSortedPosts(), 0, RECORDS_PER_PAGE)
---

<BaseLayout title={SITE_TITLE}>
  <main class="flex flex-col gap-y-16" slot="main">
    <ContentDiv
      className="bg-linear-to-r from-blue-950 via-blue-800 to-indigo-950 py-16 text-white/80"
      mainCls="gap-y-4"
    >
      <div
        class="flex flex-col items-center gap-4 lg:flex-row lg:justify-between"
        slot="main"
      >
        <BaseCol className="gap-y-2">
          <h1
            class="text-center text-4xl font-semibold md:text-5xl lg:text-left"
          >
            <a
              href="/"
              class="bg-linear-to-r from-white to-white/70 bg-clip-text text-transparent"
            >
              &gt; {SITE_TITLE}
            </a>
          </h1>

          <h2 class="text-center text-xl font-medium md:text-2xl lg:text-left">
            {SITE_SUBTITLE}
          </h2>
        </BaseCol>

        <RoundedImage
          className="aspect-square h-54 w-54 shadow-lg"
          src="/img/people/antony-holmes.webp"
          title="That's me by the Hudson River"
        />
      </div>

      <section class="flex flex-col gap-y-3" slot="main">
        <p class="mb-4 text-3xl font-bold">Hi there! I'm Antony.</p>
        <p>
          That's me posing by the mighty Hudson River for no particular reason,
          except maybe to look cool wearing Risky Business sunglasses.
        </p>
        <p class="text-justify">
          I'm a researcher and software engineer who's learned how to do a few
          cool things with Java, Python, C++, Go, React, Next.js, and Astro,
          some of which were used to make the very site you're looking at right
          now. I made this site with love and to try and get high{' '}
          <ThemeLink
            href="https://pagespeed.web.dev/analysis/https-antonyholmes-dev/pzyo54v1fb?form_factor=desktop"
            >Lighthouse</ThemeLink
          >{' '}
          scores. I think I mostly succeeded.
        </p>

        <p>
          My blog covers an assortment of topics, mostly on tech, projects,
          transit, finance and whatever else takes my fancy.
        </p>

        <p>
          I have an aptly named publications page where you can view all of the
          scientific literature I have written, primarily focused on cancer
          genetics.
        </p>

        <p>
          My life story probably won't be optioned, but if it is, I hope the
          movie contains the music of Kraftwerk.
        </p>
      </section>
    </ContentDiv>

    <ContentDiv className="gap-y-4">
      <section id="latest" class="flex flex-col gap-y-8" slot="main">
        <h2 class="border-border border-b py-2 text-2xl font-bold">Latest</h2>

        <BaseCol className="gap-y-24">
          <HeroPosts posts={posts as IPost[]} />

          <RestPosts posts={posts.slice(4) as IPost[]} />

          <!-- <PagePagination page={0} pages={pages} root={root} /> -->
        </BaseCol>
      </section>
    </ContentDiv>
  </main>
</BaseLayout>

<!-- <PostSection title="Latest posts">
      <BaseLink
        href="/blog/latest"
        data-underline={true}
        className="trans-color group hover:text-primary-color data-[underline=true]:hover:decoration-primary-color inline-flex flex-row gap-x-1 text-xs"
      >
        <span>View all</span>
        <ChevronRightIcon
          stroke="stroke-[2px] stroke-foreground group-hover:stroke-primary-color"
        />
      </BaseLink>
    </PostSection> -->
