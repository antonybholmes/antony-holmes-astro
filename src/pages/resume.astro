---
import { BaseCol } from '@/components/layout/base-col'
import ContentLayout from '@/layouts/ContentLayout.astro'
import education from '../../content/education.json'
import jobs from '../../content/jobs.json'
import skills from '../../content/skills.json'
import volunteer from '../../content/volunteer.json'

const skillList: {
  name: string
  details: string[]
  //skills: { name: string; details: string[] }[]
}[] = []

skills.map((skillset: any) => {
  skillset.skills
    .sort((a: { name: string }, b: { name: string }) =>
      a.name.localeCompare(b.name)
    )
    .map((skill: any) => {
      skillList.push(skill)
    })
})
---

<ContentLayout title="Resume" tab="Resume" contentCls="mt-24">
  <BaseCol className="gap-y-16" slot="main" data-pagefind-body>
    <h1 class="text-4xl font-semibold">Resume</h1>
    <BaseCol className="gap-y-8">
      <h2 class="text-3xl font-semibold">Skills</h2>

      <article class="grid grid-cols-1 gap-x-8 gap-y-4 lg:grid-cols-4">
        <header class="mt-4">
          <h3 class="font-semibold">Technologies</h3>
          <h4 class="mt-1 text-sm font-normal text-gray-500 dark:text-gray-400">
            What I use to build things
          </h4>
        </header>
        <ul
          class="col-span-3 grid grid-cols-2 gap-x-4 gap-y-4 text-sm md:grid-cols-4 xl:grid-cols-3 2xl:grid-cols-4"
        >
          {
            skillList.map(skill => {
              return (
                <li class="trans-color flex aspect-4/3 h-full flex-col items-center justify-center gap-y-1 rounded-2xl bg-indigo-500/70 bg-linear-to-br px-4 text-center text-white hover:bg-indigo-500">
                  <h3 class="font-bold">{skill.name}</h3>
                  <p>{skill.details.sort().join(', ')}</p>
                </li>
              )
            })
          }
        </ul>
      </article>
    </BaseCol>

    <BaseCol className="gap-y-8">
      <h2 class="text-3xl font-semibold">Experience</h2>
      <ul class="flex flex-col gap-y-8">
        {
          jobs.map(job => (
            <li>
              <article class="grid grid-cols-1 gap-x-8 gap-y-4 lg:grid-cols-4">
                <header class="mt-4">
                  <h3 class="font-semibold">{job.title}</h3>
                  <h4 class="text-foreground/50 mt-1 text-sm font-normal">
                    {job.company}
                  </h4>
                  <p class="text-foreground/50 mt-2 text-sm font-normal">
                    {job.date}
                  </p>
                </header>
                <div class="trans-300 transition-color bg-muted/25 hover:bg-muted/50 col-span-3 rounded-2xl p-6 lg:p-10">
                  <p>{job.overview}</p>
                  <ul class="mt-4 ml-6 flex list-disc flex-col gap-y-2">
                    {job.details.map(detail => (
                      <li>{detail}</li>
                    ))}
                  </ul>
                </div>
              </article>
            </li>
          ))
        }
      </ul>
    </BaseCol>

    <BaseCol className="gap-y-8">
      <h2 class="text-3xl font-semibold">Volunteer Work</h2>
      <ul class="flex flex-col gap-y-8">
        {
          volunteer.map(job => (
            <li>
              <article class="grid grid-cols-1 gap-x-8 gap-y-4 lg:grid-cols-4">
                <header class="mt-4">
                  <h3 class="font-semibold">{job.title}</h3>
                  <h4 class="text-foreground/50 mt-1 text-sm font-normal">
                    {job.company}
                  </h4>
                  <p class="text-foreground/50 mt-2 text-sm font-normal">
                    {job.date}
                  </p>
                </header>
                <div class="trans-300 transition-color bg-muted/25 hover:bg-muted/50 col-span-3 rounded-2xl p-8">
                  <ul class="ml-6 flex list-disc flex-col gap-y-2">
                    {job.details.map(detail => (
                      <li>{detail}</li>
                    ))}
                  </ul>
                </div>
              </article>
            </li>
          ))
        }
      </ul>
    </BaseCol>

    <BaseCol className="gap-y-8">
      <h2 class="text-3xl font-semibold">Education</h2>

      <ul class="flex flex-col gap-y-8">
        {
          education.map((degree, di) => (
            <li>
              <article class="grid grid-cols-1 gap-x-8 gap-y-8 lg:grid-cols-4">
                {di === 0 ? (
                  <header class="mt-4">
                    <h3 class="font-semibold">School</h3>

                    <p class="text-foreground/50 mt-2 text-sm font-normal">
                      Places I've studied
                    </p>
                  </header>
                ) : (
                  <span />
                )}
                <div class="trans-300 transition-color hover:text-theme border-border/25 col-span-3 flex min-h-32 w-full flex-col justify-center rounded-2xl border p-12 shadow-lg">
                  <header>
                    <h3 class="text-xl font-semibold">{degree.title}</h3>

                    <h4>{degree.school}</h4>
                  </header>

                  <ul class="mt-2 text-sm text-gray-500">
                    {degree.details.map(detail => (
                      <li>{detail}</li>
                    ))}
                  </ul>
                </div>
              </article>
            </li>
          ))
        }
      </ul>
    </BaseCol>
  </BaseCol>
</ContentLayout>
