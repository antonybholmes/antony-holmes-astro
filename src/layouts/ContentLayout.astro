---
import { Breadcrumb } from '@/components/breadcrumb'
import ContentDiv from '@/components/layout/ContentDiv.astro'
import { BaseCol } from '@/components/layout/base-col'
import { PageTitle } from '@/components/page-title'
import type { ColorMode } from '@/interfaces/color-mode'
import { type ICrumbProps } from '@/lib/crumbs'
import type { ILayoutProps } from '@interfaces/layout-props'
import BaseLayout from './BaseLayout.astro'

export interface Props extends ILayoutProps, ICrumbProps {
  showTitle?: boolean
  subTitle?: string
  superTitle?: string
  contentCls?: string
  mode?: ColorMode
}

let {
  title,
  description,
  showTitle,
  subTitle,
  superTitle,
  tab,
  crumbs,
  contentCls = 'mt-24',
  mode = 'light',
  className,
  ...props
} = Astro.props
---

<BaseLayout
  title={title}
  description={description}
  tab={tab}
  className={className}
  mode={mode}
  {...props}
>
  <slot name="head" slot="head" />
  <ContentDiv slot="main" className={contentCls}>
    <BaseCol slot="main" className="gap-y-8">
      {
        (showTitle || crumbs) && (
          <BaseCol className="gap-y-4">
            <slot name="header" />
            {crumbs && <Breadcrumb crumbs={crumbs} />}
            {showTitle && (
              <PageTitle
                title={title}
                subTitle={subTitle}
                superTitle={superTitle}
              />
            )}
          </BaseCol>
        )
      }
      <slot name="main" />
    </BaseCol>
  </ContentDiv>
</BaseLayout>
